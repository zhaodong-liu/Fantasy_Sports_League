{% extends "base.html" %}

{% block title %}
Update Waiver Status
{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Update Waiver Status</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        h2 {
            text-align: center;
            margin-top: 30px;
            font-size: 32px;
            color: #333;
        }

        /* Flash Messages */
        .flash-messages {
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
        }

        .flash-messages .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: inline-block;
        }

        .flash-messages .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .flash-messages .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        /* Form Card */
        .form-card {
            max-width: 600px;
            margin: 30px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }

        .form-card .card-header {
            background-color: #ffc107;
            color: #333;
            font-size: 18px;
            text-align: center;
            padding: 15px;
            border-radius: 8px 8px 0 0;
        }

        .form-card .form-group {
            margin-bottom: 15px;
        }

        .form-card label {
            font-size: 16px;
            margin-bottom: 5px;
            display: block;
        }

        .form-card input,
        .form-card select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-card input[readonly] {
            background-color: #e9ecef;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .action-buttons button,
        .action-buttons a {
            padding: 10px 20px;
            font-size: 16px;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            transition: background-color 0.2s;
            cursor: pointer;
        }

        .action-buttons button {
            background-color: #28a745;
            color: white;
        }

        .action-buttons button:hover {
            background-color: #218838;
        }

        .action-buttons a {
            background-color: #6c757d;
            color: white;
            text-align: center;
        }

        .action-buttons a:hover {
            background-color: #5a6268;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .form-card label {
                font-size: 14px;
            }

            .form-card input,
            .form-card select {
                font-size: 14px;
                padding: 8px;
            }

            .action-buttons button,
            .action-buttons a {
                font-size: 14px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <h2>Update Waiver Status</h2>

    <!-- Flash Messages -->
    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
    </div>

    <!-- Update Form Card -->
    <div class="form-card">
        <div class="card-header">
            Waiver Information
        </div>
        <form method="post" action="{{ url_for('update_waiver_status', waiver_id=waiver.WaiverID) }}">
            <div class="form-group">
                <label for="waiver_id">Waiver ID:</label>
                <input type="text" id="waiver_id" name="waiver_id" value="{{ waiver.WaiverID }}" readonly>
            </div>
            <div class="form-group">
                <label for="player_id">Player ID:</label>
                <input type="text" id="player_id" name="player_id" value="{{ waiver.PlayerID }}" readonly>
            </div>
            <div class="form-group">
                <label for="team_id">Team ID:</label>
                <input type="text" id="team_id" name="team_id" value="{{ waiver.TeamID }}" readonly>
            </div>
            <div class="form-group">
                <label for="current_status">Current Status:</label>
                <input type="text" id="current_status" name="current_status" 
                       value="{% if waiver.WaiverStatus == 'P' %}Pending{% elif waiver.WaiverStatus == 'A' %}Approved{% elif waiver.WaiverStatus == 'D' %}Denied{% else %}Unknown{% endif %}" 
                       readonly>
            </div>
            <div class="form-group">
                <label for="status">New Status:</label>
                <select id="status" name="status" required>
                    <option value="">-- Please Select Status --</option>
                    <option value="A">Approve</option>
                    <option value="D">Deny</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pickup_date">Waiver Pickup Date:</label>
                <input type="text" id="pickup_date" name="pickup_date" 
                       value="{{ waiver.WaiverPickupDate.strftime('%B %d, %Y') if waiver.WaiverPickupDate else 'N/A' }}" 
                       readonly>
            </div>
            <div class="action-buttons">
                <button type="submit">
                    <i class="fas fa-check-circle"></i> Update Status
                </button>
                <a href="{{ url_for('waiver_details', waiver_id=waiver.WaiverID) }}">
                    <i class="fas fa-times-circle"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</body>
</html>
{% endblock %}